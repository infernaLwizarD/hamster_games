<% content_for(:title) { "–ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä—ã" } %>

<div class="page-container">
  <header class="page-header">
    <h1>üìú –ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä—ã: <%= @game.game_type_name %></h1>
    <%= link_to "‚Üê –ù–∞–∑–∞–¥", :back, class: "back-link" %>
  </header>

  <div class="game-summary">
    <div class="game-players">
      <div class="player <%= 'winner' if @game.winner == @game.player1 %>">
        <span class="player-name"><%= @game.player1.username %></span>
        <% if @game.winner == @game.player1 %>üèÜ<% end %>
      </div>
      <span class="vs">VS</span>
      <div class="player <%= 'winner' if @game.winner == @game.player2 %>">
        <span class="player-name"><%= @game.player2&.username || "‚Äî" %></span>
        <% if @game.winner == @game.player2 %>üèÜ<% end %>
      </div>
    </div>

    <div class="game-result">
      <% if @game.draw? %>
        <span class="result-draw">–ù–∏—á—å—è</span>
      <% elsif @game.winner %>
        <span class="result-winner">–ü–æ–±–µ–¥–∏—Ç–µ–ª—å: <%= @game.winner.username %></span>
      <% end %>
    </div>

    <div class="game-dates">
      <p>–ù–∞—á–∞–ª–æ: <%= @game.started_at&.strftime("%d.%m.%Y %H:%M:%S") %></p>
      <p>–û–∫–æ–Ω—á–∞–Ω–∏–µ: <%= @game.finished_at&.strftime("%d.%m.%Y %H:%M:%S") %></p>
    </div>
  </div>

  <h2>–•–æ–¥—ã</h2>
  <div class="moves-history">
    <% if @moves.empty? %>
      <p class="no-moves">–ù–µ—Ç –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö —Ö–æ–¥–æ–≤.</p>
    <% else %>
      <ol class="moves-list-detailed">
        <% @moves.each do |move| %>
          <li class="move-item">
            <span class="move-number">#<%= move.move_number %></span>
            <span class="move-player"><%= move.player.username %></span>
            <span class="move-description"><%= move.description %></span>
            <span class="move-time"><%= move.created_at.strftime("%H:%M:%S") %></span>
          </li>
        <% end %>
      </ol>
    <% end %>
  </div>
</div>
