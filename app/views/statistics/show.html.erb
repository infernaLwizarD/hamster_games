<% content_for(:title) { "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ #{@player.username}" } %>

<div class="page-container">
  <header class="page-header">
    <h1>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: <%= @player.username %></h1>
    <%= link_to "‚Üê –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤", statistics_path, class: "back-link" %>
  </header>

  <div class="player-stats-card">
    <div class="stats-grid">
      <div class="stat-item">
        <span class="stat-value wins"><%= @player.wins_count %></span>
        <span class="stat-label">–ü–æ–±–µ–¥—ã</span>
      </div>
      <div class="stat-item">
        <span class="stat-value losses"><%= @player.losses_count %></span>
        <span class="stat-label">–ü–æ—Ä–∞–∂–µ–Ω–∏—è</span>
      </div>
      <div class="stat-item">
        <span class="stat-value draws"><%= @player.draws_count %></span>
        <span class="stat-label">–ù–∏—á—å–∏</span>
      </div>
      <div class="stat-item">
        <span class="stat-value"><%= @player.total_games %></span>
        <span class="stat-label">–í—Å–µ–≥–æ –∏–≥—Ä</span>
      </div>
      <div class="stat-item">
        <span class="stat-value winrate"><%= @player.win_rate %>%</span>
        <span class="stat-label">–í–∏–Ω—Ä–µ–π—Ç</span>
      </div>
    </div>
  </div>

  <h2>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–≥—Ä—ã</h2>
  <div class="games-history">
    <% if @games.empty? %>
      <p class="no-games">–ù–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –∏–≥—Ä.</p>
    <% else %>
      <table class="games-table">
        <thead>
          <tr>
            <th>–ò–≥—Ä–∞</th>
            <th>–ü—Ä–æ—Ç–∏–≤–Ω–∏–∫</th>
            <th>–†–µ–∑—É–ª—å—Ç–∞—Ç</th>
            <th>–î–∞—Ç–∞</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% @games.each do |game| %>
            <tr>
              <td><%= game.game_type_name %></td>
              <td><%= game.opponent(@player)&.username || "‚Äî" %></td>
              <td>
                <% if game.draw? %>
                  <span class="result-draw">–ù–∏—á—å—è</span>
                <% elsif game.winner == @player %>
                  <span class="result-win">–ü–æ–±–µ–¥–∞</span>
                <% else %>
                  <span class="result-loss">–ü–æ—Ä–∞–∂–µ–Ω–∏–µ</span>
                <% end %>
              </td>
              <td><%= game.finished_at&.strftime("%d.%m.%Y %H:%M") %></td>
              <td>
                <%= link_to "–ò—Å—Ç–æ—Ä–∏—è", game_history_path(game), class: "btn btn-sm btn-outline" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% end %>
  </div>
</div>
